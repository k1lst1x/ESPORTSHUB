{% extends 'base.html' %}
{% load static %}

{% block content %}
    <main class="hero">
        <div class="ellipse left-ellipse"></div>
        <div class="ellipse right-ellipse"></div>

        <!-- Include Header -->
        {% include 'header.html' %}

        <div class="content">
            <div class="left">
                <h1>ULTIMATE <br><span class="red">GAMERS</span> <br>HEAVEN</h1>
                <!-- <button>УЗНАТЬ ПОДРОБНЕЕ</button> -->
                <br>
                <a href="{% url 'create_tournament' %}">
                    <button>СОЗДАТЬ ТУРНИР</button>
                </a>
                <br>
                <a href="{% url 'game' %}">
                    <button>INVOKER GAME</button>
                </a>
                <br>
                <a href="{% url 'how_it_works' %}">
                    <button>КАК ЭТО РАБОТАЕТ?</button>
                </a>
                
            </div>
            <div class="right">
                <div class="news">
                    <a href="{% url 'news_list' %}" class="back-link"><h3>Последние новости</h3></a>
                    <!-- <div class="user">
                        <img src="static/images/profile.svg" alt="Профиль">
                        <span>Bakhytzhan</span>
                    </div> -->
                    {% for news in latest_news %}
                        <a href="{% url 'news_detail' news.id %}">
                            <div class="news-item">
                                <h5>{{ news.title }}</h5>
                                <p><small>{{ news.created_at|date:"d.m.Y" }}</small></p>
                            </div>
                        </a>
                    {% empty %}
                        <p>Новостей пока нет.</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </main>

    <div class="games">
        <div class="game cs2">CS 2</div>
        <div class="game dota2">DOTA 2</div>
    </div>
    
    <!-- Best Players Section -->
    <section class="best-players">
        <!-- Background Image -->
        <div class="best-players-bg" style="background-image: url('{% static 'images/cs2_bg.jpg' %}');"></div>
        
        <!-- Red SVG Overlay -->
        <img src="{% static 'images/best_players_overlay.svg' %}" alt="Best Players" class="best-players-overlay">

        <h2 class="best-players-title">COUNTER STRIKE 2</h2>

        <div class="players-grid">
            <div class="player-card" style="background-color: #FF4848; background-image: url('{% static 'images/g2_logo.png' %}');">
                <div class="player-img-container">
                    <img src="{% static 'images/m0nesy.png' %}" alt="m0NESY">
                </div>
                <span class="player-name">M0NESY</span>
            </div>
            <div class="player-card" style="background-color: #2317A8; background-image: url('{% static 'images/eternal_fire_logo.png' %}');">
                <div class="player-img-container">
                    <img src="{% static 'images/xantares.png' %}" alt="XANTARES">
                </div>
                <span class="player-name">XANTARES</span>
            </div>
            <div class="player-card" style="background-color: #FFED4B; background-image: url('{% static 'images/vitality_logo.png' %}');">
                <div class="player-img-container">
                    <img src="{% static 'images/zywoo.png' %}" alt="ZYWOO">
                </div>
                <span class="player-name">ZYWOO</span>
            </div>
            <div class="player-card" style="background-color: #6FB200; background-image: url('{% static 'images/liquid_logo.png' %}');">
                <div class="player-img-container">
                    <img src="{% static 'images/elige.png' %}" alt="ELIGE">
                </div>
                <span class="player-name">ELIGE</span>
            </div>
            <div class="player-card" style="background-color: #3CDFF5; background-image: url('{% static 'images/g2_logo.png' %}');">
                <div class="player-img-container">
                    <img src="{% static 'images/donk.png' %}" alt="DONK">
                </div>
                <span class="player-name">DONK</span>
            </div>
            <div class="player-card" style="background-color: #B22000; background-image: url('{% static 'images/spirit_logo.png' %}');">
                <div class="player-img-container">
                    <img src="{% static 'images/magixx.png' %}" alt="MAGIXX">
                </div>
                <span class="player-name">MAGIXX</span>
            </div>
        </div>

        <!-- Next Slide Button -->
        <div class="next-slide">
            <img src="{% static 'images/arrow.svg' %}" alt="Next">
        </div>
    </section>

    <!-- Глобальный турнирный блок -->
    <section class="global-tournament">
        <div class="tournament-bg" style="background-image: url('{% static 'images/tournament_bg.jpg' %}');"></div>

        <div class="tournament-content">
            <p class="tournament-subtitle">Скоро состоится</p>
            <h2 class="tournament-title">ГЛОБАЛЬНЫЙ ТУРНИР <br> THE INTERNATIONAL</h2>
            <p class="tournament-location">Место проведения: Китай, Пекин</p>
            <h3 class="tournament-date">
                <span class="bold">2025</span> <span class="bold">SEP</span> <span class="bold">03-09</span>
            </h3>
            <button class="red-button">УЗНАТЬ ПОДРОБНЕЕ</button>
        </div>
    </section>

    <!-- Блок Таблица матчей -->
    <section class="match-table">
        <div class="match-bg" style="background-image: url('{% static 'images/match_table_bg.png' %}');"></div>

        <h2 class="match-title">ТАБЛИЦА МАТЧЕЙ</h2>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Игра</th>
                        <th>Команда</th>
                        <th>Счет</th>
                        <th>Противник</th>
                        <th>Дата</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><img src="{% static 'images/dota_logo.png' %}" alt="Dota 2"></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/liquid_logo.png' %}');"> Team Liquid</td>
                        <td><span class="score-win">37</span> vs <span class="score-lose">20</span></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/psg_lgd_logo.png' %}');"> PSG.LGD</td>
                        <td>24 ноября 2024</td>
                    </tr>
                    <tr>
                        <td><img src="{% static 'images/dota_logo.png' %}" alt="Dota 2"></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/navi_logo.png' %}');"> Natus Vincere</td>
                        <td><span class="score-win">15</span> vs <span class="score-lose">12</span></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/vitality_logo.png' %}');"> Team Vitality</td>
                        <td>23 ноября 2024</td>
                    </tr>
                    <tr>
                        <td><img src="{% static 'images/dota_logo.png' %}" alt="Dota 2"></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/nigma_logo.png' %}');"> Nigma Galaxy</td>
                        <td><span class="score-lose">10</span> vs <span class="score-win">25</span></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/s2g_logo.png' %}');"> S2G Esports</td>
                        <td>22 ноября 2024</td>
                    </tr>
                    <tr>
                        <td><img src="{% static 'images/dota_logo.png' %}" alt="Dota 2"></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/spirit_logo.png' %}');"> Team Spirit</td>
                        <td><span class="score-win">12</span> vs <span class="score-lose">11</span></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/tundra.png' %}');"> Tundra</td>
                        <td>22 марта 2025</td>
                    </tr>
                    <tr>
                        <td><img src="{% static 'images/dota_logo.png' %}" alt="Dota 2"></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/psg_lgd_logo.png' %}');"> PSG.LGD</td>
                        <td><span class="score-win">15</span> vs <span class="score-lose">13</span></td>
                        <td class="team-cell" style="background-image: url('{% static 'images/gg_logo.png' %}');"> Gaimin Gladiators</td>
                        <td>10 мая 2025</td>
                    </tr>
                </tbody>
                
            </table>
        </div>

        <!-- Навигация -->
        <div class="match-nav">
            <button class="nav-btn"><img src="{% static 'images/arrow_left.svg' %}" alt="Previous"></button>
            <button class="nav-btn"><img src="{% static 'images/arrow_right.svg' %}" alt="Next"></button>
        </div>
    </section>

    <section class="tournament-section" style="background-image: url('{% static 'images/tournament_promo_bg.jpg' %}');">
        <div class="tournament-content">
            <p class="tournament-highlight">Создавай и побеждай!</p>
            <h2 class="tournament-title">Твой турнир — твои возможности!</h2>
            <div class="tournament-divider">
                <img src="{% static 'images/avatar.png' %}" alt="Avatar" class="tournament-avatar">
            </div>
            <p class="tournament-description">Организуй турнир любого масштаба за пару кликов. Настрой правила, пригласи участников и сделай свой вклад в киберспортивную историю!</p>
            <button class="tournament-btn">УЗНАТЬ ПОДРОБНЕЕ</button>
        </div>
    </section>

    <section class="news-preview-duo">
        {% for news in highlighted_news %}
        <div class="news-full">
            <div class="news-full-image">
                <img src="{{ news.image.url }}" alt="{{ news.title }}">
            </div>
            <div class="news-inner">
                <div class="news-full-content">
                    <h3><a href="{% url 'news_detail' news.id %}">{{ news.title }}</a></h3>
                    <p class="news-date">
                        <img src="{% static 'images/calendar_icon.svg' %}" alt="Дата">
                        {{ news.created_at|date:"d.m.Y" }}
                    </p>
                    <p class="news-text">{{ news.content|truncatewords:100 }}</p>
        
                    <div class="news-comments-form-wrapper">
                        <div class="news-comments">
                            {% for comment in news.comments.all|slice:":3" %}
                                <p><b>@{{ comment.user.username }}</b> {{ comment.text }}</p>
                            {% empty %}
                                <p>Комментариев пока нет. Будьте первым!</p>
                            {% endfor %}
                        </div>
                    
                        <form method="post" action="{% url 'news_detail' news.id %}" class="news-form">
                            {% csrf_token %}
                            <input type="text" name="comment_text" placeholder="Оставить комментарий...">
                            <button type="submit">Отправить</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </section>

{% endblock %}